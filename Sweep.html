<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OTV</title>

  <style>
/* Container for the grid */
#grid {
  display: grid;
  grid-template-columns: repeat(var(--grid-size), 1fr); /* dynamic columns */
  gap: 2px;
  width: fit-content;
  margin: 20px auto;
}

/* Each cell */
.cell {
  width: 30px;
  height: 30px;
  background-color: lightgray;
  border: 1px solid #999;
  font-weight: bold;
  font-size: 16px;
  text-align: center;
  line-height: 30px;
  cursor: pointer;
  user-select: none;
}

/* Revealed cell */
.cell.revealed {
  background-color: #e0e0e0;
  cursor: default;
}

/* Mine cell */
.cell.mine {
  background-color: red;
  color: white;
}

/* Numbered cell */
.cell.number-1 { color: blue; }
.cell.number-2 { color: green; }
.cell.number-3 { color: red; }
.cell.number-4 { color: navy; }
.cell.number-5 { color: maroon; }
.cell.number-6 { color: teal; }
.cell.number-7 { color: black; }
.cell.number-8 { color: gray; }

/* Flagged cell */
.cell.flagged {
  background-color: orange;
  color: white;
}

/* Optional: hover effect */
.cell:hover:not(.revealed) {
  background-color: #d3d3d3;
}


</style>

</head>
<body>

<h1>Sweep Sweep</h1>



<table id="grid">
  <!-- JS will generate rows and cells -->
</table>


<div> 
  <p id="feedback"></p>
</div>

<div> 
  <button id="resetBtn">Start a new game</button>
</div>



<script>

let gridSize = 10; // start with 10, easier to adjust later
let firstClick = true;
let gameOver = false;


// starting new game/setup
generateGrid();
generateBoard();


// visible GRID
function generateGrid() {
  let grid = [];
for (let gridRow = 0; gridRow < gridSize; gridRow++) {
  let tr = document.createElement("tr");
  for (let gridCol = 0; gridCol < gridSize; gridCol++) {
    let td = document.createElement("td");
    td.classList.add("cell");
    td.dataset.row = gridRow;
    td.dataset.col = gridCol;
    td.id = `cell-${gridRow}-${gridCol}`;
    tr.appendChild(td);
  }
  document.getElementById("grid").appendChild(tr);
}
}


// create clear logic BOARD (the invisible one BTS)
function generateBoard() {
let board = []
for (let row = 0; row < gridSize; row++) {
  rowData = []
  for (let col = 0; col < gridSize; col++) {
    rowData.push({
      mine: false,
      revealed: false,
      adjacent: 0
    })
  }
  board.push(rowData)
}
}
  
// create the MINES. put within checkanswer
function generateMines(clickedRow, clickedCol) {
let minesNumber = 0
let mineCol = 0
let mineRow = 0

while (minesNumber < 11) {
mineCol = Math.floor(Math.random()* gridSize)
mineRow = Math.floor(Math.random()* gridSize)
if (mineCol == clickedCol && mineRow == clickedRow) continue;
if (board[mineRow][mineCol].mine == true) continue;

  board[mineRow][mineCol].mine = true   // set the mine flag
  minesNumber++
}
}}


function checkAnswer(e) {
  
  let clickedCell = e.target;
  let clickedRow = parseInt(cell.dataset.row);
  let clickedCol = parseInt(cell.dataset.col);

  if (firstClick) {
    generateMines(clickedRow, clickedCol)
    firstClick = false
  } else {
    revealCell (clickedRow, clickedCol)
    cell
  // check for hits
    gameOver = true;
    document.getElementById("resetBtn").style.display = "inline-block";
   
  }
}



function resetGame() {
  document.getElementById("resetBtn").style.display = "none";
  document.getElementById("feedback").textContent = "";

// (need to clear off the previous grid. then can generate from scratch)
  generateBoard();
  generateGrid();
  gameOver = false;
  firstClick = true;
}

</script>

</body>
</html>

